---
title: "Fee Schedule"
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{Fee Schedule}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse  = FALSE,
  echo      = TRUE,
  message   = TRUE, 
  warning   = FALSE,
  error     = TRUE,
  comment   = "",
  dpi       = 600, 
  out.width = "100%"
  )
```

```{r setup, message=FALSE, warning=FALSE}
library(northstar)
library(dplyr)
```

## Return Information about HCPCS Code

```{r}
calc_amounts_df(hcpcs    = "11646", 
                state    = "GA", 
                locality = "99", 
                mac      = "10212") |> 
  glimpse()
```

# Fee Schedule Calculation

```{r}
rvu <- rvu(hcpcs = "11646") |> 
  select(hcpcs, 
         description,
         wrvu, 
         prvu_nf, 
         prvu_f, 
         mrvu, 
         cf)

rvu |> glimpse()
```

```{r}
gp <- gpci(
  state    = "GA",
  locality = "99",
  mac      = "10212")

gp |> glimpse()
```

```{r}
calc_amounts(wrvu     = rvu$wrvu,
             prvu_nf  = rvu$prvu_nf,
             prvu_f   = rvu$prvu_f,
             mrvu     = rvu$mrvu,
             cf       = rvu$cf,
             wgpci    = gp$wgpci,
             pgpci    = gp$pgpci,
             mgpci    = gp$mgpci)
```

```{r}
payment(hcpcs    = "11646", 
        mac      = "10212",
        locality = "99") |> 
  select(hcpcs,
         mac,
         locality,
         fee_nf,
         fee_f) |> 
  glimpse()
```
